// Generated by CoffeeScript 1.6.2
(function() {
  var PVMInterface;

  PVMInterface = (function() {
    var _xmlify;

    _xmlify = function(str) {
      return "<" + str + "></" + str + ">";
    };

    function PVMInterface(protocol, targetHost, targetPort, targetURL, username, password) {
      var namespace, url;

      this.xmlPreamble = '<?xml version="1.0" encoding="UTF-8"?><soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"><soap:Body>';
      this.xmlPostfix = '</soap:Body></soap:Envelope>';
      namespace = password != null ? "/" + targetURL + "/" : "";
      url = protocol + "//" + username + ":" + password + "@" + targetHost + ":" + targetPort + namespace;
      this.soap = $.soap;
      this.soap({
        url: url
      });
    }

    PVMInterface.prototype.method = function(methodName, params, success, error) {
      var data;

      if (arguments.length >= 3) {
        if (!error) {
          error = success;
          success = params;
          data = this.xmlPreamble + _xmlify(methodName) + this.xmlPostfix;
        } else {
          data = params;
        }
        return this.soap({
          data: data,
          success: success,
          error: error
        });
      } else {

      }
    };

    return PVMInterface;

  })();

}).call(this);

/*
//@ sourceMappingURL=pvminterface.map
*/
